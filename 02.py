import streamlit as st
import random

st.set_page_config(page_title="ìœ ë¦¬í•¨ìˆ˜ ë¬¸ì œ ìƒì„±ê¸°", page_icon="ğŸ“˜")

st.title("ğŸ“˜ ìœ ë¦¬í•¨ìˆ˜ ë¬¸ì œ ìƒì„±ê¸° (ê³ 1 ìˆ˜ì¤€)")
st.write("ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ìƒˆë¡œìš´ ë¬¸ì œë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”!")

# ------------------------------
# ë¬¸ì œì€í–‰ ìƒì„± í•¨ìˆ˜
# ------------------------------

def generate_basic_problem():
    # ìœ ë¦¬ì‹ ê³„ì‚° ë¬¸ì œ
    problems = [
        ("ë‹¤ìŒì„ ê³„ì‚°í•˜ì‹œì˜¤:  \\( \\frac{2x}{x^2 - 1} + \\frac{3x}{x + 1} \\)", "\\( \\frac{5x^2 + 2x}{x^2 - 1} \\)"),
        ("ë‹¤ìŒì„ ê³„ì‚°í•˜ì‹œì˜¤:  \\( \\frac{x^2 - 4}{x^2 - x - 6} \\)", "\\( \\frac{(x-2)(x+2)}{(x-3)(x+2)} = \\frac{x-2}{x-3}, x \\neq -2, 3 \\)"),
        ("ë‹¤ìŒì„ ì•½ë¶„í•˜ì‹œì˜¤:  \\( \\frac{x^2 - 9}{x^2 + 5x + 6} \\)", "\\( \\frac{x - 3}{x + 2}, x \\neq -2, -3 \\)")
    ]
    return random.choice(problems)

def generate_concept_problem():
    # ê°œë… í™•ì¸ ë¬¸ì œ
    problems = [
        ("í•¨ìˆ˜ \\( f(x) = \\frac{1}{x-3} \\) ì˜ ì •ì˜ì—­ì„ êµ¬í•˜ì‹œì˜¤.", "ì •ì˜ì—­: \\( \\mathbb{R} \\setminus \\{3\\} \\)"),
        ("í•¨ìˆ˜ \\( f(x) = \\frac{2x+1}{x} \\) ì˜ ìˆ˜ì§ì ê·¼ì„ ì˜ ë°©ì •ì‹ì„ êµ¬í•˜ì‹œì˜¤.", "ìˆ˜ì§ì ê·¼ì„ : \\( x = 0 \\)"),
        ("í•¨ìˆ˜ \\( f(x) = \\frac{x-1}{x+2} \\) ì˜ ìˆ˜í‰ì ê·¼ì„ ì„ êµ¬í•˜ì‹œì˜¤.", "ìˆ˜í‰ì ê·¼ì„ : \\( y = 1 \\)")
    ]
    return random.choice(problems)

def generate_graph_problem():
    # ê·¸ë˜í”„ í•´ì„ ë¬¸ì œ
    problems = [
        ("í•¨ìˆ˜ \\( f(x) = \\frac{1}{x} \\) ì˜ ê·¸ë˜í”„ë¥¼ í‰í–‰ì´ë™í•˜ì—¬ \\( f(x) = \\frac{1}{x-2} + 1 \\) ì´ ë˜ì—ˆë‹¤. ì´ë™ ë°©í–¥ê³¼ ê±°ë¦¬ë¥¼ ë§í•˜ì‹œì˜¤.",
         "ì˜¤ë¥¸ìª½ìœ¼ë¡œ 2, ìœ„ë¡œ 1 ë§Œí¼ í‰í–‰ì´ë™"),
        ("í•¨ìˆ˜ \\( f(x) = \\frac{2}{x} \\) ê·¸ë˜í”„ì˜ ì ê·¼ì„ ì„ ì“°ì‹œì˜¤.", "ìˆ˜ì§ì ê·¼ì„ : x=0, ìˆ˜í‰ì ê·¼ì„ : y=0"),
        ("í•¨ìˆ˜ \\( f(x) = \\frac{1}{x+1} \\) ì˜ ê·¸ë˜í”„ëŠ” \\( y = \\frac{1}{x} \\) ì˜ ê·¸ë˜í”„ë¥¼ ì–´ëŠ ë°©í–¥ìœ¼ë¡œ ì´ë™í•œ ê²ƒì¸ê°€?",
         "ì™¼ìª½ìœ¼ë¡œ 1ë§Œí¼ ì´ë™")
    ]
    return random.choice(problems)

def generate_applied_problem():
    # ì‘ìš©í˜• ë¬¸ì œ
    problems = [
        ("ì–´ë–¤ íƒ±í¬ì— ë¬¼ì„ ë„£ì„ ë•Œì˜ ì†ë„ê°€ ì‹œê°„ì— ë”°ë¼ \\( v(t) = \\frac{100}{t+2} \\) (L/min) ì´ë¼ë©´, t=3ì¼ ë•Œ ì†ë„ë¥¼ êµ¬í•˜ì‹œì˜¤.",
         "\\( v(3) = \\frac{100}{5} = 20 \\text{ L/min} \\)"),
        ("í•¨ìˆ˜ \\( f(x) = \\frac{k}{x} \\) ê°€ ì  (2,3)ì„ ì§€ë‚œë‹¤ë©´, ìƒìˆ˜ kì˜ ê°’ì„ êµ¬í•˜ì‹œì˜¤.",
         "\\( 3 = \\frac{k}{2} \\Rightarrow k = 6 \\)"),
        ("í•¨ìˆ˜ \\( f(x) = \\frac{1}{x-1} \\) ì´ ì •ì˜ë˜ì§€ ì•ŠëŠ” xì˜ ê°’ì„ êµ¬í•˜ì‹œì˜¤.",
         "x = 1")
    ]
    return random.choice(problems)

# ------------------------------
# ë¬¸ì œ ì„ íƒ UI
# ------------------------------

problem_type = st.selectbox(
    "ë¬¸ì œ ìœ í˜•ì„ ì„ íƒí•˜ì„¸ìš” ğŸ‘‡",
    ("ê¸°ë³¸ ìœ ë¦¬ì‹ ê³„ì‚°", "ìœ ë¦¬í•¨ìˆ˜ ê°œë…", "ê·¸ë˜í”„ í•´ì„", "ì‘ìš©í˜• ë¬¸ì œ")
)

if st.button("ë¬¸ì œ ìƒì„±í•˜ê¸° ğŸ²"):
    if problem_type == "ê¸°ë³¸ ìœ ë¦¬ì‹ ê³„ì‚°":
        q, a = generate_basic_problem()
    elif problem_type == "ìœ ë¦¬í•¨ìˆ˜ ê°œë…":
        q, a = generate_concept_problem()
    elif problem_type == "ê·¸ë˜í”„ í•´ì„":
        q, a = generate_graph_problem()
    else:
        q, a = generate_applied_problem()

    st.markdown(f"### ğŸ§® ë¬¸ì œ")
    st.markdown(q)
    with st.expander("ì •ë‹µ ë³´ê¸°"):
        st.markdown(f"**ì •ë‹µ:** {a}")
else:
    st.info("ë¬¸ì œ ìœ í˜•ì„ ì„ íƒí•˜ê³  â€˜ë¬¸ì œ ìƒì„±í•˜ê¸°â€™ ë²„íŠ¼ì„ ëˆŒëŸ¬ë³´ì„¸ìš”!")

st.write("---")
st.caption("Â© 2025 ìœ ë¦¬í•¨ìˆ˜ ë¬¸ì œ ìƒì„±ê¸° - ê³ ë“±í•™êµ 1í•™ë…„ ìˆ˜ì¤€")
